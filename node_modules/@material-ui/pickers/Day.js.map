{"version":3,"file":"Day.js","sources":["../src/views/Calendar/Day.tsx"],"sourcesContent":["import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport ButtonBase, { ButtonBaseProps } from '@material-ui/core/ButtonBase';\nimport { ExtendMui } from '../../typings/helpers';\nimport { onSpaceOrEnter } from '../../_helpers/utils';\nimport { useUtils } from '../../_shared/hooks/useUtils';\nimport { makeStyles, fade } from '@material-ui/core/styles';\nimport { DAY_SIZE, DAY_MARGIN } from '../../constants/dimensions';\nimport { withDefaultProps } from '../../_shared/withDefaultProps';\nimport { useCanAutoFocus } from '../../_shared/hooks/useCanAutoFocus';\nimport { PickerSelectionState } from '../../_shared/hooks/usePickerState';\n\nconst muiComponentConfig = { name: 'MuiPickersDay' };\n\nexport const useStyles = makeStyles(\n  theme => ({\n    root: {\n      ...theme.typography.caption,\n      width: DAY_SIZE,\n      height: DAY_SIZE,\n      borderRadius: '50%',\n      padding: 0,\n      // background required here to prevent collides with the other days when animating with transition group\n      backgroundColor: theme.palette.background.paper,\n      color: theme.palette.text.primary,\n      '&:hover': {\n        backgroundColor: fade(theme.palette.action.active, theme.palette.action.hoverOpacity),\n      },\n      '&:focus': {\n        backgroundColor: fade(theme.palette.action.active, theme.palette.action.hoverOpacity),\n        '&$selected': {\n          willChange: 'background-color',\n          backgroundColor: theme.palette.primary.dark,\n        },\n      },\n      '&$selected': {\n        color: theme.palette.primary.contrastText,\n        backgroundColor: theme.palette.primary.main,\n        fontWeight: theme.typography.fontWeightMedium,\n        transition: theme.transitions.create('background-color', {\n          duration: theme.transitions.duration.short,\n        }),\n        '&:hover': {\n          willChange: 'background-color',\n          backgroundColor: theme.palette.primary.dark,\n        },\n      },\n      '&$disabled': {\n        color: theme.palette.text.secondary,\n      },\n    },\n    dayWithMargin: {\n      margin: `0 ${DAY_MARGIN}px`,\n    },\n    dayOutsideMonth: {\n      color: theme.palette.text.secondary,\n    },\n    hiddenDaySpacingFiller: {\n      visibility: 'hidden',\n    },\n    today: {\n      '&:not($selected)': {\n        border: `1px solid ${theme.palette.text.secondary}`,\n      },\n    },\n    dayLabel: {\n      // need for overrides\n    },\n    selected: {},\n    disabled: {},\n  }),\n  muiComponentConfig\n);\n\nexport interface DayProps extends ExtendMui<ButtonBaseProps> {\n  /**\n   * The date to show.\n   */\n  day: unknown;\n  /**\n   * Is focused by keyboard navigation.\n   */\n  focused?: boolean;\n  /**\n   * Can be focused by tabbing in.\n   */\n  focusable?: boolean;\n  /**\n   * Is day in current month.\n   */\n  inCurrentMonth: boolean;\n  /**\n   * Is switching month animation going on right now.\n   */\n  isAnimating?: boolean;\n  /**\n   * Is today?\n   */\n  today?: boolean;\n  /**\n   * Disabled?.\n   */\n  disabled?: boolean;\n  /**\n   * Selected?\n   */\n  selected?: boolean;\n  /**\n   * Is keyboard control and focus management enabled.\n   */\n  allowKeyboardControl?: boolean;\n  /**\n   * Disable margin between days, useful for displaying range of days.\n   */\n  disableMargin?: boolean;\n  /**\n   * Display disabled dates outside the current month.\n   * @default false\n   */\n  showDaysOutsideCurrentMonth?: boolean;\n  /**\n   * Disable highlighting today date with a circle.\n   * @default false\n   */\n  disableHighlightToday?: boolean;\n  /**\n   * Allow selecting the same date (fire onChange even if same date is selected).\n   * @default false\n   */\n  allowSameDateSelection?: boolean;\n  onDayFocus: (day: unknown) => void;\n  onDaySelect: (day: unknown, isFinish: PickerSelectionState) => void;\n}\n\nconst PureDay: React.FC<DayProps> = ({\n  allowKeyboardControl,\n  allowSameDateSelection = false,\n  className,\n  day,\n  disabled,\n  disableHighlightToday = false,\n  disableMargin = false,\n  focusable = false,\n  focused = false,\n  hidden,\n  inCurrentMonth: isInCurrentMonth,\n  isAnimating,\n  onClick,\n  onDayFocus,\n  onDaySelect,\n  onFocus,\n  onKeyDown,\n  selected,\n  showDaysOutsideCurrentMonth = false,\n  today: isToday,\n  ...other\n}) => {\n  const utils = useUtils();\n  const classes = useStyles();\n  const canAutoFocus = useCanAutoFocus();\n  const ref = React.useRef<HTMLButtonElement>(null);\n\n  React.useEffect(() => {\n    if (\n      focused &&\n      !disabled &&\n      !isAnimating &&\n      isInCurrentMonth &&\n      ref.current &&\n      allowKeyboardControl &&\n      canAutoFocus\n    ) {\n      ref.current.focus();\n    }\n  }, [allowKeyboardControl, canAutoFocus, disabled, focused, isAnimating, isInCurrentMonth]);\n\n  const handleFocus = (event: React.FocusEvent<HTMLButtonElement>) => {\n    if (!focused) {\n      onDayFocus(day);\n    }\n\n    if (onFocus) {\n      onFocus(event);\n    }\n  };\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    if (!allowSameDateSelection && selected) return;\n\n    if (!disabled) {\n      onDaySelect(day, 'finish');\n    }\n\n    if (onClick) {\n      onClick(event);\n    }\n  };\n\n  const handleKeyDown = onSpaceOrEnter(() => {\n    if (!disabled) {\n      onDaySelect(day, 'finish');\n    }\n  }, onKeyDown);\n\n  const dayClassName = clsx(\n    classes.root,\n    {\n      [classes.selected]: selected,\n      [classes.dayWithMargin]: !disableMargin,\n      [classes.today]: !disableHighlightToday && isToday,\n      [classes.dayOutsideMonth]: !isInCurrentMonth && showDaysOutsideCurrentMonth,\n    },\n    className\n  );\n\n  if (!isInCurrentMonth && !showDaysOutsideCurrentMonth) {\n    // Do not render button and not attach any listeners for empty days\n    return <div aria-hidden className={clsx(dayClassName, classes.hiddenDaySpacingFiller)} />;\n  }\n\n  return (\n    <ButtonBase\n      ref={ref}\n      centerRipple\n      data-mui-test=\"day\"\n      disabled={disabled}\n      aria-label={utils.format(day, 'fullDate')}\n      tabIndex={focused || focusable ? 0 : -1}\n      className={dayClassName}\n      {...other}\n      onFocus={handleFocus}\n      onKeyDown={handleKeyDown}\n      onClick={handleClick}\n    >\n      <span className={classes.dayLabel}>{utils.format(day, 'dayOfMonth')}</span>\n    </ButtonBase>\n  );\n};\n\nexport const areDayPropsEqual = (prevProps: DayProps, nextProps: DayProps) => {\n  return (\n    prevProps.focused === nextProps.focused &&\n    prevProps.focusable === nextProps.focusable &&\n    prevProps.isAnimating === nextProps.isAnimating &&\n    prevProps.today === nextProps.today &&\n    prevProps.disabled === nextProps.disabled &&\n    prevProps.selected === nextProps.selected &&\n    prevProps.allowKeyboardControl === nextProps.allowKeyboardControl &&\n    prevProps.disableMargin === nextProps.disableMargin &&\n    prevProps.showDaysOutsideCurrentMonth === nextProps.showDaysOutsideCurrentMonth &&\n    prevProps.disableHighlightToday === nextProps.disableHighlightToday &&\n    prevProps.className === nextProps.className &&\n    prevProps.inCurrentMonth === nextProps.inCurrentMonth &&\n    prevProps.onDayFocus === nextProps.onDayFocus &&\n    prevProps.onDaySelect === nextProps.onDaySelect\n  );\n};\n\nexport const Day = withDefaultProps(muiComponentConfig, React.memo(PureDay, areDayPropsEqual));\n\nPureDay.displayName = 'PickersDay';\n\nPureDay.propTypes = {\n  today: PropTypes.bool,\n  disabled: PropTypes.bool,\n  selected: PropTypes.bool,\n};\n\nPureDay.defaultProps = {\n  disabled: false,\n  today: false,\n  selected: false,\n};\n"],"names":["muiComponentConfig","name","useStyles","makeStyles","theme","root","typography","caption","width","DAY_SIZE","height","borderRadius","padding","backgroundColor","palette","background","paper","color","text","primary","fade","action","active","hoverOpacity","willChange","dark","contrastText","main","fontWeight","fontWeightMedium","transition","transitions","create","duration","secondary","dayWithMargin","margin","DAY_MARGIN","dayOutsideMonth","hiddenDaySpacingFiller","visibility","today","border","dayLabel","selected","disabled","PureDay","allowKeyboardControl","allowSameDateSelection","className","day","disableHighlightToday","disableMargin","focusable","focused","hidden","isInCurrentMonth","inCurrentMonth","isAnimating","onClick","onDayFocus","onDaySelect","onFocus","onKeyDown","showDaysOutsideCurrentMonth","isToday","other","utils","useUtils","classes","canAutoFocus","useCanAutoFocus","ref","React","current","focus","handleFocus","event","handleClick","handleKeyDown","onSpaceOrEnter","dayClassName","clsx","React.createElement","format","areDayPropsEqual","prevProps","nextProps","Day","withDefaultProps","displayName","propTypes","PropTypes","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;AAaA,IAAMA,kBAAkB,GAAG;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAA3B;IAEaC,SAAS,GAAGC,UAAU,CACjC,UAAAC,KAAK;AAAA,SAAK;AACRC,IAAAA,IAAI,kCACCD,KAAK,CAACE,UAAN,CAAiBC,OADlB;AAEFC,MAAAA,KAAK,EAAEC,QAFL;AAGFC,MAAAA,MAAM,EAAED,QAHN;AAIFE,MAAAA,YAAY,EAAE,KAJZ;AAKFC,MAAAA,OAAO,EAAE,CALP;AAMF;AACAC,MAAAA,eAAe,EAAET,KAAK,CAACU,OAAN,CAAcC,UAAd,CAAyBC,KAPxC;AAQFC,MAAAA,KAAK,EAAEb,KAAK,CAACU,OAAN,CAAcI,IAAd,CAAmBC,OARxB;AASF,iBAAW;AACTN,QAAAA,eAAe,EAAEO,IAAI,CAAChB,KAAK,CAACU,OAAN,CAAcO,MAAd,CAAqBC,MAAtB,EAA8BlB,KAAK,CAACU,OAAN,CAAcO,MAAd,CAAqBE,YAAnD;AADZ,OATT;AAYF,iBAAW;AACTV,QAAAA,eAAe,EAAEO,IAAI,CAAChB,KAAK,CAACU,OAAN,CAAcO,MAAd,CAAqBC,MAAtB,EAA8BlB,KAAK,CAACU,OAAN,CAAcO,MAAd,CAAqBE,YAAnD,CADZ;AAET,sBAAc;AACZC,UAAAA,UAAU,EAAE,kBADA;AAEZX,UAAAA,eAAe,EAAET,KAAK,CAACU,OAAN,CAAcK,OAAd,CAAsBM;AAF3B;AAFL,OAZT;AAmBF,oBAAc;AACZR,QAAAA,KAAK,EAAEb,KAAK,CAACU,OAAN,CAAcK,OAAd,CAAsBO,YADjB;AAEZb,QAAAA,eAAe,EAAET,KAAK,CAACU,OAAN,CAAcK,OAAd,CAAsBQ,IAF3B;AAGZC,QAAAA,UAAU,EAAExB,KAAK,CAACE,UAAN,CAAiBuB,gBAHjB;AAIZC,QAAAA,UAAU,EAAE1B,KAAK,CAAC2B,WAAN,CAAkBC,MAAlB,CAAyB,kBAAzB,EAA6C;AACvDC,UAAAA,QAAQ,EAAE7B,KAAK,CAAC2B,WAAN,CAAkBE,QAAlB;AAD6C,SAA7C,CAJA;AAOZ,mBAAW;AACTT,UAAAA,UAAU,EAAE,kBADH;AAETX,UAAAA,eAAe,EAAET,KAAK,CAACU,OAAN,CAAcK,OAAd,CAAsBM;AAF9B;AAPC,OAnBZ;AA+BF,oBAAc;AACZR,QAAAA,KAAK,EAAEb,KAAK,CAACU,OAAN,CAAcI,IAAd,CAAmBgB;AADd;AA/BZ,MADI;AAoCRC,IAAAA,aAAa,EAAE;AACbC,MAAAA,MAAM,cAAOC,UAAP;AADO,KApCP;AAuCRC,IAAAA,eAAe,EAAE;AACfrB,MAAAA,KAAK,EAAEb,KAAK,CAACU,OAAN,CAAcI,IAAd,CAAmBgB;AADX,KAvCT;AA0CRK,IAAAA,sBAAsB,EAAE;AACtBC,MAAAA,UAAU,EAAE;AADU,KA1ChB;AA6CRC,IAAAA,KAAK,EAAE;AACL,0BAAoB;AAClBC,QAAAA,MAAM,sBAAetC,KAAK,CAACU,OAAN,CAAcI,IAAd,CAAmBgB,SAAlC;AADY;AADf,KA7CC;AAkDRS,IAAAA,QAAQ,EAAE;AAAA,KAlDF;AAqDRC,IAAAA,QAAQ,EAAE,EArDF;AAsDRC,IAAAA,QAAQ,EAAE;AAtDF,GAAL;AAAA,CAD4B,EAyDjC7C,kBAzDiC;;AAwHnC,IAAM8C,OAA2B,GAAG,SAA9BA,OAA8B,OAsB9B;AAAA,MArBJC,oBAqBI,QArBJA,oBAqBI;AAAA,mCApBJC,sBAoBI;AAAA,MApBJA,sBAoBI,sCApBqB,KAoBrB;AAAA,MAnBJC,SAmBI,QAnBJA,SAmBI;AAAA,MAlBJC,GAkBI,QAlBJA,GAkBI;AAAA,MAjBJL,QAiBI,QAjBJA,QAiBI;AAAA,mCAhBJM,qBAgBI;AAAA,MAhBJA,qBAgBI,sCAhBoB,KAgBpB;AAAA,gCAfJC,aAeI;AAAA,MAfJA,aAeI,mCAfY,KAeZ;AAAA,4BAdJC,SAcI;AAAA,MAdJA,SAcI,+BAdQ,KAcR;AAAA,0BAbJC,OAaI;AAAA,MAbJA,OAaI,6BAbM,KAaN;AAAA,MAZJC,MAYI,QAZJA,MAYI;AAAA,MAXYC,gBAWZ,QAXJC,cAWI;AAAA,MAVJC,WAUI,QAVJA,WAUI;AAAA,MATJC,OASI,QATJA,OASI;AAAA,MARJC,UAQI,QARJA,UAQI;AAAA,MAPJC,WAOI,QAPJA,WAOI;AAAA,MANJC,OAMI,QANJA,OAMI;AAAA,MALJC,SAKI,QALJA,SAKI;AAAA,MAJJnB,QAII,QAJJA,QAII;AAAA,mCAHJoB,2BAGI;AAAA,MAHJA,2BAGI,sCAH0B,KAG1B;AAAA,MAFGC,OAEH,QAFJxB,KAEI;AAAA,MADDyB,KACC;;AACJ,MAAMC,KAAK,GAAGC,QAAQ,EAAtB;AACA,MAAMC,OAAO,GAAGnE,SAAS,EAAzB;AACA,MAAMoE,YAAY,GAAGC,eAAe,EAApC;AACA,MAAMC,GAAG,GAAGC,MAAA,CAAgC,IAAhC,CAAZ;AAEAA,EAAAA,SAAA,CAAgB,YAAM;AACpB,QACEnB,OAAO,IACP,CAACT,QADD,IAEA,CAACa,WAFD,IAGAF,gBAHA,IAIAgB,GAAG,CAACE,OAJJ,IAKA3B,oBALA,IAMAuB,YAPF,EAQE;AACAE,MAAAA,GAAG,CAACE,OAAJ,CAAYC,KAAZ;AACD;AACF,GAZD,EAYG,CAAC5B,oBAAD,EAAuBuB,YAAvB,EAAqCzB,QAArC,EAA+CS,OAA/C,EAAwDI,WAAxD,EAAqEF,gBAArE,CAZH;;AAcA,MAAMoB,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAgD;AAClE,QAAI,CAACvB,OAAL,EAAc;AACZM,MAAAA,UAAU,CAACV,GAAD,CAAV;AACD;;AAED,QAAIY,OAAJ,EAAa;AACXA,MAAAA,OAAO,CAACe,KAAD,CAAP;AACD;AACF,GARD;;AAUA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACD,KAAD,EAAgD;AAClE,QAAI,CAAC7B,sBAAD,IAA2BJ,QAA/B,EAAyC;;AAEzC,QAAI,CAACC,QAAL,EAAe;AACbgB,MAAAA,WAAW,CAACX,GAAD,EAAM,QAAN,CAAX;AACD;;AAED,QAAIS,OAAJ,EAAa;AACXA,MAAAA,OAAO,CAACkB,KAAD,CAAP;AACD;AACF,GAVD;;AAYA,MAAME,aAAa,GAAGC,cAAc,CAAC,YAAM;AACzC,QAAI,CAACnC,QAAL,EAAe;AACbgB,MAAAA,WAAW,CAACX,GAAD,EAAM,QAAN,CAAX;AACD;AACF,GAJmC,EAIjCa,SAJiC,CAApC;AAMA,MAAMkB,YAAY,GAAGC,IAAI,CACvBb,OAAO,CAAChE,IADe,EAQvB4C,SARuB,EAGDL,QAHC,IAGpByB,OAAO,CAACzB,QAHY,EAII,CAACQ,aAJL,IAIpBiB,OAAO,CAAClC,aAJY,EAKJ,CAACgB,qBALG,IAKsBc,OALtB,IAKpBI,OAAO,CAAC5B,KALY,EAMM,CAACe,gBANP,IAM2BQ,2BAN3B,IAMpBK,OAAO,CAAC/B,eANY,CAAzB;;AAWA,MAAI,CAACkB,gBAAD,IAAqB,CAACQ,2BAA1B,EAAuD;AACrD;AACA,wBAAOmB;AAAK,yBAAL;AAAiB,MAAA,SAAS,EAAED,IAAI,CAACD,YAAD,EAAeZ,OAAO,CAAC9B,sBAAvB;AAAhC,MAAP;AACD;;AAED,sBACE4C,cAAC,UAAD;AACE,IAAA,GAAG,EAAEX,GADP;AAEE,IAAA,YAAY,MAFd;AAGE,qBAAc,KAHhB;AAIE,IAAA,QAAQ,EAAE3B,QAJZ;AAKE,kBAAYsB,KAAK,CAACiB,MAAN,CAAalC,GAAb,EAAkB,UAAlB,CALd;AAME,IAAA,QAAQ,EAAEI,OAAO,IAAID,SAAX,GAAuB,CAAvB,GAA2B,CAAC,CANxC;AAOE,IAAA,SAAS,EAAE4B;AAPb,KAQMf,KARN;AASE,IAAA,OAAO,EAAEU,WATX;AAUE,IAAA,SAAS,EAAEG,aAVb;AAWE,IAAA,OAAO,EAAED;AAXX,mBAaEK;AAAM,IAAA,SAAS,EAAEd,OAAO,CAAC1B;AAAzB,KAAoCwB,KAAK,CAACiB,MAAN,CAAalC,GAAb,EAAkB,YAAlB,CAApC,CAbF,CADF;AAiBD,CAvGD;;IAyGamC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,SAAD,EAAsBC,SAAtB,EAA8C;AAC5E,SACED,SAAS,CAAChC,OAAV,KAAsBiC,SAAS,CAACjC,OAAhC,IACAgC,SAAS,CAACjC,SAAV,KAAwBkC,SAAS,CAAClC,SADlC,IAEAiC,SAAS,CAAC5B,WAAV,KAA0B6B,SAAS,CAAC7B,WAFpC,IAGA4B,SAAS,CAAC7C,KAAV,KAAoB8C,SAAS,CAAC9C,KAH9B,IAIA6C,SAAS,CAACzC,QAAV,KAAuB0C,SAAS,CAAC1C,QAJjC,IAKAyC,SAAS,CAAC1C,QAAV,KAAuB2C,SAAS,CAAC3C,QALjC,IAMA0C,SAAS,CAACvC,oBAAV,KAAmCwC,SAAS,CAACxC,oBAN7C,IAOAuC,SAAS,CAAClC,aAAV,KAA4BmC,SAAS,CAACnC,aAPtC,IAQAkC,SAAS,CAACtB,2BAAV,KAA0CuB,SAAS,CAACvB,2BARpD,IASAsB,SAAS,CAACnC,qBAAV,KAAoCoC,SAAS,CAACpC,qBAT9C,IAUAmC,SAAS,CAACrC,SAAV,KAAwBsC,SAAS,CAACtC,SAVlC,IAWAqC,SAAS,CAAC7B,cAAV,KAA6B8B,SAAS,CAAC9B,cAXvC,IAYA6B,SAAS,CAAC1B,UAAV,KAAyB2B,SAAS,CAAC3B,UAZnC,IAaA0B,SAAS,CAACzB,WAAV,KAA0B0B,SAAS,CAAC1B,WAdtC;AAgBD;IAEY2B,GAAG,GAAGC,gBAAgB,CAACzF,kBAAD,EAAqByE,IAAA,CAAW3B,OAAX,EAAoBuC,gBAApB,CAArB;AAEnCvC,OAAO,CAAC4C,WAAR,GAAsB,YAAtB;AAEA,wCAAA5C,OAAO,CAAC6C,SAAR,GAAoB;AAClBlD,EAAAA,KAAK,EAAEmD,IADW;AAElB/C,EAAAA,QAAQ,EAAE+C,IAFQ;AAGlBhD,EAAAA,QAAQ,EAAEgD;AAHQ,CAApB;AAMA9C,OAAO,CAAC+C,YAAR,GAAuB;AACrBhD,EAAAA,QAAQ,EAAE,KADW;AAErBJ,EAAAA,KAAK,EAAE,KAFc;AAGrBG,EAAAA,QAAQ,EAAE;AAHW,CAAvB;;;;"}